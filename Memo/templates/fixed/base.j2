{% extends "base.j2" %}
{% block content %}
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <style>
    .article-img {
        height: 300px;
        background: url("{{ key_visual | default('/static/images/default.jpg') }}") center / cover no-repeat;
        filter: grayscale(100%);
    }
    .markdown-body {
      font-size: 1.4rem;
      line-height: 2;
    }
    .hljs-ln-line.hljs-ln-code {
        white-space: pre !important;
        width: 100%;
    }
    .hljs-ln-n {
        margin-right: 12px;
    }
    .hljs-ln tbody>tr {
        line-height: 2;
    }
    .hljs-ln tbody>tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.05);
    }
    pre.file-tag {
        margin-top: 10px;
        position: relative;
    }
    pre.file-tag[data-tag]::before {
        content: attr(data-tag);
        position: absolute;
        top: 0;
        right: 1em;
        font-size: 0.7rem;
        line-height: 1;
        padding: 0.8em 1.2em;
        color: #ccc;
        background-color: #335;
        border-radius: 0 0 2px 2px;
        box-shadow: 0 1px 1px rgba(0, 0, 0, .5);
        pointer-events: none; /* Copy等を阻害しない */
        user-select: none;
    }
  </style>
  <div class="mb-4 rounded text-body-emphasis bg-body-secondary article-img"></div>
  <div class="row">
    <div class="col-md-9">
      <h1 class="display-4 my-3 pb-4 border-bottom">{{ page_title }}</h1>
      <div class="markdown-body">
        {% block article_body %}
        {% endblock article_body %}
      </div>
      <div class="my-5 d-flex gap-3">
        <a class="col-8 btn btn-outline-secondary btn-lg flex-grow-1" id="scrollTopBtn"><i class="fa fa-arrow-up" aria-hidden="true"></i> ページの最上部に戻る</a>
        <a class="col-4 btn btn-outline-secondary btn-lg" style="width:30%;" href="{{ url_for('public.public_index') }}"><i class="fa fa-reply"></i> トップの一覧に戻る</a>
      </div>
    </div>
    {% include "public/aside.j2" %}
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    hljs.highlightAll();
    hljs.initLineNumbersOnLoad();
  });
  document.getElementById('scrollTopBtn').addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
  </script>
{% endblock %}
