{% extends "base.j2" %}
{% block page_title %}ページが見つかりません | {{ SITE_NAME }}{% endblock %}
{% block content %}
    <style>
    .article-img {
        height: 300px;
        background: url("{{ key_visual | default('/static/images/other/404.png') }}") center / cover no-repeat;
        filter: grayscale(100%);
        background-color: #212529;
        mix-blend-mode:color-dodge;
    }
    </style>
    <div class="mb-4 rounded text-body-emphasis bg-body-secondary article-img"></div>
    <div class="row">
        <div class="col-md-9">
            <h1 class="display-4 my-3 pb-4 border-bottom">
                <i class="fa fa-exclamation-triangle"></i> NotFoundエラー
            </h1>
            <div class="markdown-body">
                <h2 class="mb-5">ステータスコード：404</h2>
                <div class="d-flex gap-3">
                    <button id="translate-btn" class="btn btn-outline-secondary btn-sm"><i class="fa fa-language fs-2 mb-2"></i><br>翻訳</button>
                    <h3 id="error-text" class="alert alert-danger mb-0" style="line-height:3rem">{{ msg }}</h3>
                </div>
            </div>
            <div class="d-grid mt-5">
                <a class="col-4 btn btn-outline-secondary btn-lg w-100" href="{{ url_for('public.public_index') }}"><i class="fa fa-reply"></i> トップ一覧に戻る</a>
            </div>
        </div>
        {% include "public/aside.j2" %}
    </div>
    <script>
    document.getElementById('translate-btn').addEventListener('click', async () => {
        const target = document.getElementById('error-text');
        const text = target.innerText;
        try {
            const res = await fetch(
                'https://translate.googleapis.com/translate_a/single' +
                '?client=gtx&sl=auto&tl=ja&dt=t&q=' + encodeURIComponent(text)
            );
            const data = await res.json();
            // 翻訳結果の抽出
            const translated = data[0].map(item => item[0]).join('');
            target.innerText = translated;
        } catch (e) {
            console.error('Translation failed:', e);
        }
    });
    </script>
{% endblock %}
