# 管理画面AIボタン のトークン使用量（概算）

## 使用モデル別

| ページ | ボタン | モデル | 入力上限 | 出力上限 |
|--------|--------|--------|----------|----------|
| ダッシュボード | 記事解析スコアリング | `gemini-2.5-flash-lite` | 記事全文×5件 | 512 × 5 |
| マーケティング | 記事英語翻訳 | `gemini-2.5-flash-lite` | 記事全文 | 4,096 |
| 固定ページ管理 | ページ生成 | `gemini-2.5-flash-lite` | タイトル+設定 | 2,048 |
| カテゴリー管理 | AI提案 | `gemini-2.5-flash-lite` | カテゴリー一覧 | 128 |
| サムネイル管理 | アイコン生成 | `gemini-2.0-flash-exp-image-generation` | 英語プロンプト | 画像1枚 |

---

## ボタン別トークン詳細

### 1. 記事解析スコアリング（ダッシュボード）
> `analyze` ルート → `ai_translate_score.py`

- **入力/記事**: システムプロンプト約700トークン + タイトル約20 + 本文最大3,000字≒**約2,700トークン**
- **出力/記事**: JSON形式 ≒ 約200〜300トークン（上限512）
- **注意**: ボタン1回で**最大5記事**分API呼び出し（キャッシュ済みはスキップ）
- **1回押した場合の合計**: 入力約13,500 + 出力約1,500 ≒ **約15,000トークン**

### 2. 記事英語翻訳（マーケティング）
> `translate` ルート → `ai_translate.py`

- **入力**: システムプロンプト約300 + タイトル + 本文全文（記事の長さに依存）
  - seed記事は約1,000字なので ≒ **約1,700トークン**
- **出力**: 英語翻訳文 ≒ 本文と同量、最大4,096トークン
  - 実際は約**2,000〜3,000トークン**
- **1回押した場合の合計**: ≒ **約4,000〜5,000トークン**（1記事あたり）

### 3. 固定ページ生成
> `fixed_generate` ルート → `ai_fixed_generate.py`

- **入力**: プロンプト約400 + タイトル + 既存キー一覧 ≒ **約600トークン**
- **出力**: HTML本文1,000字 + 要約200字 + key ≒ **約1,200〜1,800トークン**（上限2,048）
- **1回押した場合の合計**: ≒ **約2,000トークン**

### 4. カテゴリーAI提案
> `category_ai_suggest` ルート → `views.py`内

- **入力**: プロンプト約300 + 既存カテゴリー名・色リスト ≒ **約500トークン**
- **出力**: `{"name": "...", "color": "#..."}` のみ（上限128）≒ **約20〜40トークン**
- **1回押した場合の合計**: ≒ **約540トークン** ← 最も軽量

### 5. サムネイルAI生成（画像）
> `user_thumb_ai_generate` ルート → `ai_thumb_generate.py`

- **入力**: 英語テキストプロンプト約60トークン
- **出力**: **画像1枚**（512×512 PNG）
- テキストトークン課金は極小ですが、**画像生成はピクセル数ベースの別課金**
- `gemini-2.0-flash-exp-image-generation` は現状無料枠（experimentalモデル）

---

## 概算コスト（参考）

`gemini-2.5-flash-lite` の料金は入力 $0.10/1M・出力 $0.40/1M トークン（2025年5月時点の公表値）、1ドル=150円換算：

| ボタン | 入力コスト | 出力コスト | 合計（1回） |
|--------|-----------|-----------|------------|
| 記事解析（5件） | ¥0.20 | ¥0.09 | **≈ ¥0.29** |
| 記事翻訳（1件） | ¥0.025 | ¥0.18〜¥0.27 | **≈ ¥0.20〜¥0.30** |
| 固定ページ生成 | ¥0.009 | ¥0.11 | **≈ ¥0.12** |
| カテゴリー提案 | ¥0.0075 | ¥0.003 | **≈ ¥0.01** |
| サムネイル生成 | 画像モデルのため別建て | - | 現状**無料枠** |

---

## まとめ

- **最もコストがかかる**: 記事解析（5件一括）> 記事翻訳（長文記事）
- **最も軽量**: カテゴリーAI提案（約540トークン）
- **1日5回制限**がかかっているので、フル使用しても各ボタン最大で**¥1〜2円程度**
- 翻訳は記事が長くなるほどコストが増加（`content` 全文を送信しているため）
